<html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://checkout.stripe.com/checkout.js"></script>

<link href='https://api.mapbox.com/mapbox-gl-js/v0.36.0/mapbox-gl.css' rel='stylesheet' />

  <style>
  #map {
    margin: 0 auto;
    width: 100%;
    height: 500px;
    border: 1px solid #ccc;
  }
  .marker-cluster {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #3498db;
    color: #fff;
    text-align: center;
    font-size: 24px;
  }
  .leaflet-cluster-anim .leaflet-marker-icon, .leaflet-cluster-anim .leaflet-marker-shadow {
  -webkit-transition: -webkit-transform 0.3s ease-out, opacity 0.3s ease-in;
  -moz-transition: -moz-transform 0.3s ease-out, opacity 0.3s ease-in;
  -o-transition: -o-transform 0.3s ease-out, opacity 0.3s ease-in;
  transition: transform 0.3s ease-out, opacity 0.3s ease-in;
  }
  </style>

<!--     <script src='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v1.0.0/leaflet.markercluster.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v1.0.0/MarkerCluster.css' rel='stylesheet' />
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v1.0.0/MarkerCluster.Default.css' rel='stylesheet' /> -->
    <title>React App</title>
  </head>
  <body>
 <!--    <style>
    #toolbar {
        position: absolute;
        top: 0;
        right: 0;
        background: #fff;
        width: 150px;
        padding:5px;
    }
    </style> -->

    <div id="root"></div>

    <!-- <form id='toolbar'>
      <div><input type='checkbox' name='filters' onclick='showStations();' value='lighthouse' checked> Buoy</div>
      <div><input type='checkbox' name='filters' onclick='showStations();' value='star' checked> Star</div>
    </form>

    <div id='map' style='width: 1100px; height: 700px;'>
      <script>
        L.mapbox.accessToken = 'pk.eyJ1Ijoiam9uYXRob25sYXlsbyIsImEiOiJjajE3bDUwZ2YwNHhjMnFvN2cwaW5vYWFrIn0.ZYv3mfTj8HIP5LdLMWvw4Q';

        // sets default view, we can change the view of the world and how far they can zoom in
        var map = L.mapbox.map('map')
          .setView([-8.310,19.087], 1.5);

        // custom style sheet, we can edit this later
        L.mapbox.styleLayer('a').addTo(map);

        // cluster filter
        var overlays = L.layerGroup().addTo(map);

        var layers;
        var layersshark;

        L.mapbox.featureLayer()
        .loadURL('http://localhost:8080/allbuoys')
        // .addTo(map)
          .on('ready', function(e){
            layers = e.target;
            showStations();
          });

        L.mapbox.featureLayer()
          .loadURL('http://localhost:8080/allsharks')
          .on('ready', function(e){
            layersshark = e.target;
            showStations();
          });

        var filters = document.getElementById('toolbar').filters;

        function showStations() {
          var list = [];
          for (var i = 0; i < filters.length; i++) {
            if (filters[i].checked){
              list.push(filters[i].value);
            }
          }
          overlays.clearLayers();
          var clusterGroup = new L.MarkerClusterGroup().addTo(overlays);
          layers.eachLayer(function(layer){
            if(list.indexOf(layer.feature.properties['marker-symbol']) !== -1){
              clusterGroup.addLayer(layer);
            }
          });

          layersshark.eachLayer(function(layer){
            if(list.indexOf(layer.feature.properties['marker-symbol']) !== -1){
              clusterGroup.addLayer(layer);
            }
          });
        }
      </script>
    </div> -->
  </body>
</html>
