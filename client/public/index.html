<html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
<!--     <script src='https://api.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.css' rel='stylesheet' /> -->
    <script src='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v1.0.0/leaflet.markercluster.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v1.0.0/MarkerCluster.css' rel='stylesheet' />
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v1.0.0/MarkerCluster.Default.css' rel='stylesheet' />
    <title>React App</title>
  </head>
  <body>
    <div id="root"></div>
    <div id='map' style='width: 1100px; height: 700px;'>
      <script>
        L.mapbox.accessToken = 'pk.eyJ1Ijoiam9uYXRob25sYXlsbyIsImEiOiJjajE3bDUwZ2YwNHhjMnFvN2cwaW5vYWFrIn0.ZYv3mfTj8HIP5LdLMWvw4Q';

        // sets default view, we can change the view of the world and how far they can zoom in
        var map = L.mapbox.map('map')
          .setView([-8.310,19.087], 1.5);

        // custom style sheet, we can edit this later
        L.mapbox.styleLayer('mapbox://styles/jonathonlaylo/cj1g01mw200062ss53ht46jgb').addTo(map);

        // calls get request for buoy data
        L.mapbox.featureLayer()
          .loadURL('http://localhost:8080/allbuoys')
          // .addTo(map);
          .on('ready', function(e){
            var clusterGroup = new L.MarkerClusterGroup();
            e.target.eachLayer(function(layer){
              clusterGroup.addLayer(layer);
            });
            map.addLayer(clusterGroup);
            var popup = L.popup()
            .setLatLng(latlng)
            .openOn(map);
          });

      </script>
    </div>

  </body>
</html>
